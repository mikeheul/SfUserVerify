{% extends 'base.html.twig' %}

{% block title %}Hello EventController!{% endblock %}

{% block body %}

    <div class="events">
        {% for event in events %}
            <div class="event-card">
                <h2>{{ event.title }}</h2>
                <p>{{ event.startAt | date('d-m-Y H:i') }}</p>
                <ul>
                    {% for user in event.users %}
                        <li>{{ user.pseudo }}</li>
                    {% endfor %}
                </ul>
                <div class="join">
                    {% if app.user in event.users %}
                        <a href="{{ path('user_unsubscribe', {'id':event.id}) }}">Unsubscribe</a>
                    {% else %}
                        <a href="{{ path('user_subscribe', {'id':event.id}) }}">Subscribe</a>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>

{% endblock %}
